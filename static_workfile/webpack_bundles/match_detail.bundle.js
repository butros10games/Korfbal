(()=>{"use strict";var e,t,n,a,i=document.getElementById("info-container"),d=document.querySelector(".carousel"),o=document.querySelectorAll(".button"),r=/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/,l=window.location.href,s=null;function c(a){var d=JSON.parse(a.data);switch(console.log(d),d.command){case"events":cleanDom(i),function(e){var n=e.events,a=e.home_team_id,d=0,o=0,r=document.createElement("div");if(r.classList.add("event-container"),n.length>0)n.forEach((function(e){var t=document.createElement("div");if(t.classList.add("event","flex-row"),"goal"===e.type){var n=createEventTypeDiv(e.type,"64px",e.for_team?"#4CAF50":"rgba(235, 0, 0, 0.7)"),i=function(e,t,n,a){return e.team_id===a?t++:n++,[t,n]}(e,d,o,a);d=i[0],o=i[1];var l=createMidsectionDiv(e.goal_type+' ("'+e.time+'")',truncateMiddle(e.player,20)),s=createScoreDiv(d+"-"+o,"64px");t.appendChild(n),t.appendChild(l),t.appendChild(s)}else if("wissel"===e.type){var c=createEventTypeDiv(e.type,"64px","#eb9834"),p=createMidsectionDiv('("'+e.time+'")',truncateMiddle(e.player_in,15)+" --\x3e "+truncateMiddle(e.player_out,15)),u=document.createElement("div");u.style.width="84px",t.appendChild(c),t.appendChild(p),t.appendChild(u)}else if("pauze"===e.type){var m=createEventTypeDiv(e.type,"64px","#2196F3"),h=createMidsectionDiv('("'+e.time+'")',getFormattedTime(e)),v=document.createElement("div");v.style.width="84px",t.appendChild(m),t.appendChild(h),t.appendChild(v)}r.appendChild(t)}));else{var l=document.createElement("p");l.classList.add("flex-center"),l.innerHTML="<p>Geen events gevonden.</p>",r.appendChild(l)}if(e.access&&"finished"!==e.status){var s=document.createElement("div");s.classList.add("flex-center"),s.style.marginTop="12px";var c=document.createElement("a");c.classList.add("tracker-button"),c.href="/match/selector/"+t+"/",c.innerHTML="bijhouden",c.style.marginBottom="12px",s.appendChild(c),r.appendChild(s)}i.appendChild(r)}(d);break;case"playerGroups":cleanDom(i),d.is_coach&&!d.finished?updatePlayerGroups(d,i,e):showPlayerGroups(d,i);break;case"team_goal_change":document.getElementById("score").innerHTML=d.goals_for+" / "+d.goals_against;break;case"stats":updateStatistics(d.data,i,e,n);break;case"timer_data":s&&(s.destroy(),s=null),"active"===d.type?(s=new CountdownTimer(d.time,1e3*d.length,null,1e3*d.pause_length)).start():"pause"===d.type?s=new CountdownTimer(d.time,1e3*d.length,d.calc_to,1e3*d.pause_length):"start"===d.type&&(s=new CountdownTimer(d.time,1e3*d.length,null,0)).start();break;case"pause":!0===d.pause?(s.stop(),console.log("Timer paused")):!1===d.pause&&(s.start(d.pause_time),console.log("Timer resumed"));break;case"part_end":document.getElementById("periode_number").innerHTML=d.part,s.stop(),s=null;var o=document.getElementById("counter"),r=d.part_length/60,l=d.part_length%60;o.innerHTML=r+":"+l.toString().padStart(2,"0")}}window.addEventListener("DOMContentLoaded",(function(){n=document.getElementById("user_id").innerText;var i=r.exec(l);i?(t=i[1],console.log(t)):console.log("No UUID found in the URL."),a="wss://"+window.location.host+"/ws/match/"+t+"/",(e=initializeSocket(a,c)).onopen=function(){console.log("WebSocket connection established, sending initial data..."),requestInitalData(".button.active",e,{user_id:n}),e.send(JSON.stringify({command:"get_time"}))},setupCarousel(d,o,e,{user_id:n},"get_stats")}))})();